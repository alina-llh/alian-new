<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>1.头部导航布局</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body style="height: 1000px">
<!--包裹器   整个页面的容器-->
    <div class="wrap">
        <!--窗口侧边栏-->
        <div class="toolBar toolWrap">
            <!--内容容器-->
            <div class="content"></div>
            <!--面包屑-->
            <div class="but list"></div>
            <!--中间列表-->
            <ul class="toolList">
                <li>
                    <i class="tabIcon vip"></i>
                    <em>尚品汇员</em>
                </li>
                <li>
                    <i class="tabIcon cart"></i>
                    <em>购物车</em>
                </li>
                <li>
                    <i class="tabIcon follow"></i>
                    <em>我的关注</em>
                </li>
                <li>
                    <i class="tabIcon history"></i>
                    <em>历史记录</em>
                </li>
                <li>
                    <i class="tabIcon message"></i>
                    <em>消息</em>
                </li>
                <li>
                    <i class="tabIcon qus"></i>
                    <em>咨询</em>
                </li>
            </ul>
            <!--回到顶部-->
            <div class="back">
                <i class="tabIcon"></i>
                <em></em>
            </div>
        </div>
        <header class="header">
            <!--头部第一行-->
            <div class="top">
                <div class="container">
                    <!--登录-->
                    <div class="login">
                        <p>尚品汇欢迎您！</p>
                        <p>
                            <span>请</span>
                            <a href="###">登录</a>
                            <a href="###" class="register">免费注册</a>
                        </p>
                    </div>
                    <!--头部导航-->
                    <div class="headerNav">
                        <a href="###">我的订单</a>
                        <a href="###">我的购物车</a>
                        <a href="###">我的尚品汇</a>
                        <a href="###">尚品汇会员</a>
                        <a href="###">企业采购</a>
                        <a href="###">关注尚品汇</a>
                        <a href="###">合作招商</a>
                        <a href="###">商家后台</a>
                    </div>
                </div>

            </div>
            <!--头部第二行-->
            <div class="bottom">
                <h1 class="logoArea">
                    <a href="###">
                        <img src="img/Logo.png" alt="尚品汇">
                    </a>
                </h1>
                <div class="searchArea">
                    <form action="">
                        <input type="text">
                        <button>搜索</button>
                    </form>
                </div>
            </div>
        </header>
        <!--商品导航分类-->
        <div class="typeNav">
            <div class="container">
                <h2 class="all">全部商品分类</h2>
                <nav>
                    <a href="###">服装城</a>
                    <a href="###">美妆馆</a>
                    <a href="###">尚品汇超市</a>
                    <a href="###">全球购</a>
                    <a href="###">闪购</a>
                    <a href="###">团购</a>
                    <a href="###">有趣</a>
                    <a href="###">秒杀</a>
                </nav>
            </div>
        </div>
        <!--商品主要内容区域-->
        <section class="con">
            <!--路径导航-->
            <div class="conPoin">
                <!--<a href="###">手机、数码、通讯</a>-->
                <!--<a href="###">手机</a>-->
                <!--<a href="###">Apple苹果</a>-->
                <!--<a >iphone 6S系类</a>-->
            </div>
            <!--主要内容区域-->
            <div class="mainCon">
                <!--左侧放大镜-->
                <div class="previewWrap">
                    <!--放大镜效果-->
                    <div class="preview">
                        <!--小图-->
                        <div class="zoom">
                            <img src="img/s1.png" alt="">
                        </div>
                        <!--大图-->
                    </div>
                    <!--缩略图效果-->
                    <div class="specScroll">
                        <a class="prev">&lt;</a>
                        <div class="itemCon">
                            <ul class="list">
                            </ul>
                        </div>
                        <a class="next">&gt;</a>
                    </div>
                </div>
                <!--右侧商品信息-->
                <div class="infoWrap">
                    <div class="info1">

                    </div>
                    <div class="choose">
                        <div class="chooseArea">
                            <div class="choosed">

                            </div>
                        </div>
                        <div class="carWrap">
                            <div class="controls">
                                <input type="text" value="1">
                                <a href="###" class="plus">+</a>
                                <a href="###" class="mins">-</a>
                            </div>
                            <div class="addBtn">
                                <a href="###">加入购物车</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--商品详情页-->
        <section class="productDetail">
            <!--侧边栏-->
            <aside class="aside">
                <!--选项卡切换的按钮-->
                <div class="tabWrap">
                    <h4 class="active">相关分类</h4>
                    <h4>推荐品牌</h4>
                </div>
                <!--选项卡内容-->
                <div class="tabContent">
                    <div class="active">
                        <ul class="partList">
                            <li>手机</li>
                            <li>手机壳</li>
                            <li>内存卡</li>
                            <li>iphone配件</li>
                            <li>贴膜</li>
                            <li>手机耳机</li>
                            <li>移动电源</li>
                            <li>平板电脑</li>
                        </ul>
                        <ul class="goodsList">
                            <li>
                                <div class="gImg">
                                    <img src="img/part01.png" alt="">
                                </div>
                                <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                                <p class="price">¥6088.00</p>
                                <div class="addCar">
                                    <a href="###">加入购物车</a>
                                </div>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part02.png" alt="">
                                </div>
                                <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                                <p class="price">¥6088.00</p>
                                <div class="addCar">
                                    <a href="###">加入购物车</a>
                                </div>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part03.png" alt="">
                                </div>
                                <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                                <p class="price">¥6088.00</p>
                                <div class="addCar">
                                    <a href="###">加入购物车</a>
                                </div>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part01.png" alt="">
                                </div>
                                <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                                <p class="price">¥6088.00</p>
                                <div class="addCar">
                                    <a href="###">加入购物车</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div>推荐品牌</div>
                </div>
            </aside>
            <div class="detail">
                <div class="fitting">
                    <h4>选择搭配</h4>
                    <div class="goodSuits">
                        <div class="master">
                            <img src="img/l-m01.png" alt="">
                            <p>¥5299</p>
                            <i>+</i>
                        </div>
                        <ul class="suits">
                            <li class="suitsItem">
                                <img src="img/dp01.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp02.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp03.png" alt="" >
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp04.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                        </ul>
                        <div class="result">
                            <div>已选购0件商品</div>
                            <p class="price-tit">套餐价</p>
                            <p class="price">¥5299</p>
                            <button>加入购物车</button>
                        </div>
                    </div>
                </div>
                <div class="intro">
                    <ul class="tabWrap">
                        <li class="active"><a href="###">商品介绍</a></li>
                        <li><a href="###">规格与包装</a></li>
                        <li><a href="###">售后保障</a></li>
                        <li><a href="###">商品评价</a></li>
                        <li><a href="###">手机社区</a></li>
                    </ul>
                    <div class="tabContent">
                        <div class="active">
                            <ul class="goodsIntro">
                                <li>分辨率：1920*1080(FHD)</li>
                                <li>后置摄像头：1200万像素</li>
                                <li>前置摄像头：500万像素</li>
                                <li>核 数：其他</li>
                                <li>频 率：以官网信息为准</li>
                                <li>品牌： Apple</li>
                                <li>商品名称：APPLEiPhone 6s Plus</li>
                                <li>商品编号：1861098</li>
                                <li>商品产地：中国大陆</li>
                                <li>商品毛重：0.51kg</li>
                                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                            </ul>
                            <div class="introImg">
                                <img src="img/intro01.png" alt="">
                                <img src="img/intro02.png" alt="">
                                <img src="img/intro03.png" alt="">
                            </div>
                        </div>
                        <div>规格与包装</div>
                        <div>售后保障</div>
                        <div>商品评价</div>
                        <div>手机社区</div>
                    </div>
                </div>
            </div>
        </section>
    </div>
<script type="text/javascript" src="js/data.js"></script>
<script type="text/javascript">
    //页面加载完成的回调
//  window.onload = function () {
//
//  }
//  文档准备就绪
//   DOMContentLoaded 等待节点加载完成之后执行
//    DOMContentLoaded 是dom2级事件  所以需要使用addEventListener绑定监听
    window.addEventListener('DOMContentLoaded',function () {
//      定义放大镜图片id
        var magnifierImgId = 0;
//      记录商品个数  默认为1
        var goodsChangeNum = 1;
//        每一个功能都会单独放在一个函数中运行
//        1.放大镜效果
        magnifier();
        function magnifier() {
            var imgSrc = goodData.imgsrc;
//            修改放大镜的小图src为动态的数据
            var smallImg = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom>img');
            smallImg.src = imgSrc[magnifierImgId].s;
            //          放大镜外层容器
            var preview = document.querySelector('.wrap .con .mainCon .previewWrap .preview');
//            小图容器
            var smallBox = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom')
//          初始化蒙版
            var mask = null;
//          初始化大图容器
            var bigBox = null;
//          初始化大图
            var bigImg = null;

//            绑定鼠标移入移出事件
            preview.onmouseenter = function () {
//              当鼠标移入元素时  创建蒙版(大图容器 大图)   没有蒙版的时候 才会创建 如果存在则不创建
                if(!mask){
//                  创建蒙版
                    mask = document.createElement('div');
//                   给蒙版一个class   并且添加样式
                    mask.className = 'mask';
//                   把蒙版插入到小图容器当中
                    smallBox.appendChild(mask);
//                   创建大图 和大图容器
                    bigBox = document.createElement('div');
                    bigBox.className = 'bigBox';
//                  创建大图  放入大图容器当中
                    bigImg = new Image();
                    bigImg.src = imgSrc[magnifierImgId].b;
                    bigBox.appendChild(bigImg);

                    preview.appendChild(bigBox);
                }
//               鼠标移动
                smallBox.onmousemove = function (event) {
//                  当鼠标移动的时候  蒙版的位置是  鼠标的坐标 - 蒙版的一半 - 父级距离屏幕边缘的位置
                    var maskPosition = {
                        left:event.clientX - mask.offsetWidth / 2 -smallBox.getBoundingClientRect().left,
                        top:event.clientY - mask.offsetHeight / 2 - smallBox.getBoundingClientRect().top
                    };
//                   边界判断  小于最小值等于最小值  大于最大值等于最大值
                    if(maskPosition.left < 0){
                        maskPosition.left = 0;
                    }else if(maskPosition.left > smallBox.clientWidth - mask.offsetWidth){
                        maskPosition.left = smallBox.clientWidth - mask.offsetWidth;
                    }
                    if(maskPosition.top < 0 ){
                        maskPosition.top = 0;
                    }else if(maskPosition.top > smallBox.clientHeight - mask.offsetHeight){
                        maskPosition.top = smallBox.clientHeight - mask.offsetHeight;
                    }

//                  对蒙版的位置进行操作
                    mask.style.left = maskPosition.left + 'px';
                    mask.style.top = maskPosition.top + 'px';

//                   计算比例： （蒙版总共可以移动的距离 / 大图能够移动的距离）
                    var scale = (smallBox.clientWidth - mask.offsetWidth) / ( bigImg.offsetWidth-bigBox.clientWidth)
//                    console.log(scale);
//                    计算大图位置
                    var bigPosition = {
                        left:maskPosition.left / scale,
                        top:maskPosition.top / scale
                    }
//                   给大图修正位置
                    bigImg.style.marginLeft = -bigPosition.left + 'px';
                    bigImg.style.marginTop = -bigPosition.top + 'px';
                };
//              当鼠标离开时 放大镜效果结束  清除蒙版  移除事件
                preview.onmouseleave = function () {
//                移除节点
                    smallBox.removeChild(mask);
                    preview.removeChild(bigBox);
//                初始化蒙版元素
                    mask = null;
                    bigBox = null;
                    bigImg = null;
//                解绑事件
                    smallBox.onmousemove = null;
                    preview.onmouseleave = null;
                }


            }


        }
//        获取元素非行间样式
//        第一个参数要读取的元素 第二个参数要读取的样式名称
        function getStyle(obj,attr) {
          if(obj.currentStyle){
            return obj.currentStyle[attr];
          }else{
              return document.defaultView.getComputedStyle(obj,null)[attr];
          }
        }
//      2.缩略图
        thumbnail();
        function thumbnail() {
//            图片移动的容器
            var list = document.querySelector('.wrap .con .mainCon .previewWrap .specScroll .itemCon .list ');
//        根据动态数据 生成缩略图效果
            var imgSrc = goodData.imgsrc;
            imgSrc.forEach(function (item) {
                var liNode = document.createElement('li');
                var imgNode = new Image();
                imgNode.src = item.s;
                liNode.appendChild(imgNode);
                list.appendChild(liNode);
            })


            //            图片集合
            var items = document.querySelectorAll('.wrap .con .mainCon .previewWrap .specScroll .itemCon .list > li')
//        左右两个按钮
            var prev = document.querySelector('.wrap .con .mainCon .previewWrap .specScroll .prev');
            var next = document.querySelector('.wrap .con .mainCon .previewWrap .specScroll .next');

//           定义图片显示张数
            var showImg = 5;
//            定义初始化已经走过的距离
            var tempLeft = 0;
//            获取li的marginRight
            var itemRight = parseInt(getStyle(items[0],'marginRight'));
//           计算一共可以移动的距离   (总张数 - 显示张数) * (图片的宽 + marginRight)
            var countLeft = (items.length - showImg) * (items[0].offsetWidth + itemRight);
//           每次移动的图片数量
            var moveNum = 2;
//           计算每次移动的长度  (一个元素的宽度 + marginRight)* 每次移动的图片数量
            var moveLeft = (items[0].offsetWidth + itemRight) * moveNum;
//            添加过渡
            list.style.transition = '0.2s linear';
//            给两个按钮绑定单击事件
            next.onclick = function () {
//                如果已经走过的距离 小于 总共可以走的距离 才能移动
                if(tempLeft < countLeft){
//              tempLeft = 600         countLeft = 700    走一次是200
//               剩余的距离 = countLeft - tempLeft
//                  如果剩余的距离大于每次可以移动的距离  则走该移动的距离(moveLeft)
                    if(countLeft - tempLeft > moveLeft){
                        tempLeft += moveLeft;
                    }else{
//                        如果剩余的距离小于每次可以移动的距离  则走剩下的所有  100
                        tempLeft += (countLeft - tempLeft);
                    }
                    list.style.left = -tempLeft + 'px';
                }
            };
            prev.onclick = function () {
//             如果可移动距离还大于0  说明可以向左移动
                if(tempLeft >0){
//                  如果可以走的距离 大于每次移动的距离  则走该走的长度 否则直接为0
                    if(tempLeft > moveLeft){
                      tempLeft -= moveLeft;
                    }else {
                        tempLeft = 0;
                    }
                    list.style.left = -tempLeft + 'px';
                }
            }
        }
//      3.缩略图点击
        thumbnailClick();
        function thumbnailClick() {
//          获取所有图片
            var itemImgs = document.querySelectorAll('.wrap .con .mainCon .previewWrap .specScroll .itemCon .list > li>img')
//           获取小图
            var smallImg = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom>img');
            for (var i = 0; i < itemImgs.length; i++) {
//                itemImgs[i].index = i;
                itemImgs[i].onclick = function () {
                    for (var i = 0; i < itemImgs.length; i++) {
                        if(itemImgs[i] == this){
                            magnifierImgId = i;
 //                         修改小图路径
                            smallImg.src = this.src;
                        }
                    }

                }
            }
        }
//     4.商品筛选详情   动态数据加载
        screening();
        function screening() {
          var crumbData = goodData.goodsDetail.crumbData;
//         获取父容器
            var chooseAreaNode = document.querySelector('.wrap .con .mainCon .infoWrap .choose .chooseArea')
          crumbData.forEach(function (item) {
//            每次遍历进来 先创建一个dl
              var dlNode = document.createElement('dl');
//              每一个dl都只有一个dt 所以可以直接在这里创建
              var dtNode = document.createElement('dt');
//              给dt赋值
              dtNode.innerHTML = item.title;
//              把dt放到dl当中
              dlNode.appendChild(dtNode);
//              console.log(dlNode);
//              通过遍历每一个item的data 动态生成相应的dd
              item.data.forEach(function (item) {
//                 这个forEach当中的item 对应的是data里边的每一个元素值
//                生成dd
                  var ddNode = document.createElement('dd');
//                 给dd插入内容
                  ddNode.innerHTML = item.type;
//                给生成的dd扩展自定义属性 保存需要改变的价格
                  ddNode.setAttribute('changePrice',item.changePrice);
//                 把dd放入到dl当中
                  dlNode.appendChild(ddNode);
              });
              chooseAreaNode.appendChild(dlNode);
          });

//          以下是点击选择筛选内容的交互代码

//            获取所有的dl
            var dlList = chooseAreaNode.getElementsByTagName('dl');
//           定义一个数组容器，数组中保存筛选的条件，需要的时候，按照顺序保存或者获取里边的内容
//            var arr = [];
//            for (var i = 0; i < crumbData.length; i++) {
//                arr[i] = 0;
//            }
//            console.log(arr)
            var arr = new Array(crumbData.length);
//            fill es6数组方法    用传入的值 填充整个数组当中的每一个元素
            arr.fill(0);
//            遍历所有的dl标签，然后给当前dl标签中的dd绑定事件
            for (var i = 0; i < dlList.length; i++) {
//                给dl添加下标
                dlList[i].index = i;
                (function () {
//                获取当前dl标签中对应的dd
                    var ddList = dlList[i].getElementsByTagName('dd');
                    for (var j = 0; j < ddList.length; j++) {
                        ddList[j].onclick = function () {
//                     先清除所有dd的颜色
                            for (var i = 0; i < ddList.length; i++) {
                                ddList[i].style.color = '#666';
                            }
//                      再给当前的添加红色
                            this.style.color = 'red';
//                          只要用户点击操作了 就要对数组进行修改
//                          数组中需要保存元素节点 方便之后通过这个数组访问元素身上的自定义属性
                            arr[this.parentNode.index] = this;
                            console.log(arr);
                            priceSum(arr);
//                          获取mark元素的容器

                            var choosedNode = document.querySelector('.wrap .con .mainCon .infoWrap .choose .chooseArea .choosed')
//                            在每一次创建之前 清空整个父容器
                            choosedNode.innerHTML = '';
//                            遍历数组  创建相应的结构
                            arr.forEach(function (item,index) {
//                               检测数组  当数组当前元素值不为0的时候 创建mark
                                if(item){
//                                  创建mark
                                    var markNode = document.createElement('mark');
//                                  把数组内容放到mark当中去
                                    markNode.innerHTML = item.innerHTML;
//                                  创建mark里边的a标签
                                    var aNode = document.createElement('a');
//                                   给a标签添加X
                                    aNode.innerHTML = 'X';
//                                   创建a标签的时候 用一个自定义属性保存当前a是哪个元素创建的
                                    aNode.setAttribute('num',index);
//                                  把a标签放入到mark当中
                                    markNode.appendChild(aNode);
//                                  把mark放入到choosedNode当中
                                    choosedNode.appendChild(markNode);
                                }
                            });
//                          删除功能
//                          获取choosed里边所有的A标签
                            var aList = choosedNode.querySelectorAll('mark>a');
                            for (var i = 0; i < aList.length; i++) {
                                aList[i].onclick = function () {
//                                 首先先要确认  当前点击的这个a  对应的是第几个dl
                                    var num = parseInt(this.getAttribute('num'));//得到的值是个字符串
//                                    删除当前s所对应的mark标签
                                    this.parentNode.parentNode.removeChild(this.parentNode);
//                                   去掉删除的元素所对应的dd的颜色
//                                    清除当前删除掉数据对应的dl内部所有dd的颜色 再给第一个dd添加red
                                    var ddList = dlList[num].querySelectorAll('dd');
                                    for (var j = 0; j < ddList.length; j++) {
                                        ddList[j].style.color = '#666';
                                    }
//                                   给第一个dd添加默认颜色
                                    dlList[num].querySelector('dd:nth-of-type(1)').style.color = 'red';
//                                  每一次删除的时候 要在存储内容的数组当中把对应的元素的值 设置回0
                                    arr[num] = 0;
//                                   在删除的时候  需要调用函数 从新计算价钱
                                    priceSum(arr)
                                }

                            }

                        }
                    }
                })();
            }
//          计算价钱的函数
//          只要保存筛选条件的数组发生了更改 就需要调用函数从新计算单价
            function priceSum(arr) {
//           先获取默认价钱
                var newPrice = goodData.goodsDetail.price * goodsChangeNum;
                arr.forEach(function (item) {
                  if(item){
                    newPrice += parseInt(item.getAttribute('changePrice')) * goodsChangeNum;
                  }
                })
                console.log(newPrice);
                var priceNode = document.querySelector('.wrap .con .mainCon .infoWrap .info1 .priceArea .priceArea1 .price em')
                priceNode.innerHTML = newPrice;

//               当搭配修改以后 总价要更新
                var price = newPrice;
//          获取价钱元素  左边master里边的价钱
                var choosePrice = document.querySelector('.wrap .productDetail .detail .fitting .goodSuits .master p');
//          获取搭配后的总价元素   右边result里边的价钱
                var chooseAllPrice = document.querySelector('.wrap .productDetail .detail .fitting .goodSuits .result .price');
//          获取所有的复选框
                var chooseAllCheckBox = document.querySelectorAll('.wrap .productDetail .detail .fitting .goodSuits .suits .suitsItem input[type=checkbox]');

//               只要点击了dd  说明价钱发生改变   marter里边的总价也要跟着改变
                choosePrice.innerHTML = '¥'+price;
                chooseAllCheckBox.forEach(function (item) {
                    if(item.checked){
                        price += parseInt(item.value);
                    }
                })
                chooseAllPrice.innerHTML = '¥'+price;
            }
        }
        //        选择搭配总价
        fittingPrice();
        function fittingPrice() {
//          获取价钱元素
            var choosePrice = document.querySelector('.wrap .productDetail .detail .fitting .goodSuits .master p');
//          获取搭配后的总价元素
            var chooseAllPrice = document.querySelector('.wrap .productDetail .detail .fitting .goodSuits .result .price');
//          获取所有的复选框
            var chooseAllCheckBox = document.querySelectorAll('.wrap .productDetail .detail .fitting .goodSuits .suits .suitsItem input[type=checkbox]');
//            给所有的复选框绑定单击事件
//            元素集合也是可以使用forEach的
            chooseAllCheckBox.forEach(function (item,index) {
                item.onclick = function () {
                    var price = parseInt(choosePrice.innerHTML.substr(1));
//                遍历复选框集合    找到选中的复选框 把对应的价钱加给原价
                    chooseAllCheckBox.forEach(function (item) {
                        if(item.checked){
//                      能进入到这个if里边的item对应的复选框一定是选中的  需要在原价基础上增加相应的值
                            price += parseInt(item.value);
                        }
                    })
                    chooseAllPrice.innerHTML ='¥'+ price;
                }
            })
        }
//      5.商品数量交互
        goodsNum();
        function goodsNum() {
          var plusNode = document.querySelector('.wrap .con .mainCon .infoWrap .choose .carWrap .controls .plus');
          var minsNode = document.querySelector('.wrap .con .mainCon .infoWrap .choose .carWrap .controls .mins');
          var itxtNode = document.querySelector('.wrap .con .mainCon .infoWrap .choose .carWrap .controls input');
            plusNode.onclick = function () {
//                alert(1);
                goodsChangeNum++;
                itxtNode.value = goodsChangeNum;

//             获取价钱容器
                var priceNode = document.querySelector('.wrap .con .mainCon .infoWrap .info1 .priceArea .priceArea1 .price em')
//              根据当前数量计算总价
                var finalPrice = priceNode.innerHTML / ( goodsChangeNum -1) * goodsChangeNum;
                priceNode.innerHTML = finalPrice;

            };
            minsNode.onclick = function () {
              if(goodsChangeNum > 1){
                  goodsChangeNum--;
                  itxtNode.value = goodsChangeNum;
//             获取价钱容器
                  var priceNode = document.querySelector('.wrap .con .mainCon .infoWrap .info1 .priceArea .priceArea1 .price em')
                  var finalPrice = priceNode.innerHTML / ( goodsChangeNum + 1) * goodsChangeNum;
                  priceNode.innerHTML = finalPrice;
              }
            }
        }
//      商品详情的数据动态生成
        goodsDetail();
        function goodsDetail() {
//          获取数据
            var goodsData = goodData.goodsDetail;
//          获取容器
            var info1Node = document.querySelector('.wrap .con .mainCon .infoWrap .info1');
//       es6模板字符串   后续字符串拼接事件数据添加的操作 都是使用这种方式
            var str = `<h3 class="infoName">${goodsData.title}</h3>
                        <p class="news">${goodsData.recommend}</p>
                        <div class="priceArea">
                            <div class="priceArea1">
                                <div class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</div>
                                <div class="price">
                                    <i>￥</i>
                                    <em>${goodsData.price}</em>
                                    <span>降价通知</span>
                                </div>
                                <div class="remark">
                                    <i>累计评价</i>
                                    <span>${goodsData.evaluateNum}</span>
                                </div>
                            </div>
                            <div class="priceArea2">
                                <div class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</div>
                                <div class="fixWidth">
                                    <i>${goodsData.promoteSales.type}</i>
                                    <span>${goodsData.promoteSales.content}</span>
                                </div>
                            </div>
                        </div>
                        <div class="support">
                            <div>
                                <div class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</div>
                                <div class="fixWidth">${goodsData.support}</div>
                            </div>
                            <div>
                                <div class="title">配&nbsp;送&nbsp;至</div>
                                <div class="fixWidth">${goodsData.address}</div>
                            </div>
                        </div>`;
            info1Node.innerHTML = str;
        }
//      路径导航动态生成
        pathUrl();
        function pathUrl() {
//        获取容器
          var conPoinNode = document.querySelector('.wrap .con .conPoin');
//        拿到路径导航数据
          var urlCon = goodData.path;
//         遍历数据
            urlCon.forEach(function (item,index) {
//              每次遍历的时候都要创建一个新的a标签
                var aNode = document.createElement('a');
//              向a标签当中套数据的时候 我需要知道当前这个a要不要添加href属性
//              判断是不是数组的最后一个
                if(index == urlCon.length-1){
//                  最后一个
                    aNode.innerHTML = item.title;
                    conPoinNode.appendChild(aNode);
                }else{
//                  不是最后一个
                    aNode.innerHTML = item.title;
                    aNode.href = item.url;
                    conPoinNode.appendChild(aNode)
                }
            })
        }

//        选项卡切换
//        使用面向对象方法实现： 构造函数+ 原型  方法
//        两个参数  第一个参数 要点击的按钮集合    第二个参数 要操作显示与隐藏的内容区域集合
//    <div class="intro">
//        <ul class="tabWrap">
//            <li class="active"><a href="###"></a></li>
//        </ul>
//        <div class="tabContent">
//            <div class="active"></div>
//        </div>
//        tabMixin.less   样式文件
//        tabWrap 按钮容器     tabContent  内容容器    按钮与内容共用一个高亮class：active
        function Tab(btn,content) {
            this.tabBtn = btn;
            this.tabContent = content;
            var _this = this;
//            给所有的btn绑定点击事件
            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].index = i;
                this.tabBtn[i].onclick = function () {
//                 在事件的回调函数当中  this指向的是事件源
                  _this.clickBtn(this);
                }
            }
        }
        Tab.prototype.clickBtn = function (btn) {
//            选项卡切换逻辑
//            把所有的按钮清除active   隐藏所有内容容器
            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].className = '';
                this.tabContent[i].style.display = 'none';
            }
//            给当前事件源 添加active       根据当前事件源的index属性  显示对应的内容容器
            btn.className = 'active';
            this.tabContent[btn.index].style.display = 'block';

        }

//       侧边栏调用Tab切换
        asideNav();
        function asideNav() {
//         获取按钮集合 和  内容集合
            var tabBtn = document.querySelectorAll('.wrap .productDetail .aside .tabWrap h4')
            var tabContent = document.querySelectorAll('.wrap .productDetail .aside .tabContent > div');
            new Tab(tabBtn,tabContent);
        }
//      内容区域调用Tab切换
        intro();
        function intro() {
            var tabBtn = document.querySelectorAll('.wrap .productDetail .detail .intro .tabWrap li')
            var tabContent = document.querySelectorAll('.wrap .productDetail .detail .intro .tabContent > div')
            new Tab(tabBtn,tabContent);
        }
//        侧边栏效果
        asideShow();
        function asideShow() {
//          获取面包屑效果的按钮
            var butNode = document.querySelector('.wrap .toolBar .but');
//           获取侧边栏整体的父元素
            var toolBarNode = document.querySelector('.wrap .toolBar');
//          定义一个开关   标志位
            var flag = true;//默认是闭合的
            butNode.onclick = function () {
              if(flag){
//                执行展开的逻辑
                  toolBarNode.className = 'toolBar toolOut';
                  this.className = 'but cross';
              }else{
//                执行收起的逻辑
                  toolBarNode.className = 'toolBar toolWrap';
                  this.className = 'but list';
              }
//             更新标志位状态
                flag = !flag;
            }
//            小图展开逻辑
            var toolList = document.querySelectorAll('.wrap .toolBar .toolList li');
            var tabIcon = document.querySelectorAll('.wrap .toolBar .toolList li>i');
            var tabText = document.querySelectorAll('.wrap .toolBar .toolList li>em');
            for (var i = 0; i < toolList.length; i++) {
                toolList[i].index = i;

                toolList[i].onmouseenter = function () {
                    tabIcon[this.index].style.backgroundColor = 'rgb(200,17,34)';
                    tabText[this.index].style.left = '-62px';
                }
                toolList[i].onmouseleave = function () {
                    tabIcon[this.index].style.backgroundColor = '#7a6e6e';
                    tabText[this.index].style.left = '35px';
                }
            }
        }



        
    })
</script>
</body>
</html>